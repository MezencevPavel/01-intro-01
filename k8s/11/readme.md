# Домашнее задание к занятию «Компоненты Kubernetes»

### Цель задания

Рассчитать требования к кластеру под проект

------

### Инструменты и дополнительные материалы, которые пригодятся для выполнения задания:

- [Considerations for large clusters](https://kubernetes.io/docs/setup/best-practices/cluster-large/),
- [Architecting Kubernetes clusters — choosing a worker node size](https://learnk8s.io/kubernetes-node-size).

------

### Задание. Необходимо определить требуемые ресурсы
Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения. 
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
3. Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий. 
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

----

### Решение.

Master Nodes (Control Plane):  

Для стабильной работы нам потребуется 3 Master nodes с потреблением в 12 Gb ОЗУ (по 4 на ноду) и 6 CPU (по 2 на ноду)  
Так же Etcd требует минимум 2 CPU и 2 ОЗУ в количестве 3 нод.
Исходя из этого нам требуется :  
**18 Gb ОЗУ и 12 CPU** 

Worker Nodes:  

Исходя из задачи нам потребуется следующие ресурсы :  
База данных: **12 Gb ОЗУ, 3 CPU**  
Кеш: **12 Gb ОЗУ, 3 CPU**  
Фронтенд: **250 MB ОЗУ, 1 CPU**  
Бекенд: **6 Gb ОЗУ, 10 CPU**  
Что в сумме даст **30,25 Gb ОЗУ и 17 CPU**  

MN + WN = мы получаем **~50Gb ОЗУ и ~30 CPU**

Так же при планировании я бы предложил запас вычеслительных мощностей в 20% от подсчётов что в итоге имеет значение **60 Gb ОЗУ и 36 CPU**
